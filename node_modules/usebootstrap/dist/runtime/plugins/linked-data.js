import { defineNuxtPlugin, useRoute } from "#app";
import { useSiteConfig, useHead } from "#imports";
export default defineNuxtPlugin((nuxtApp) => {
  nuxtApp.hook("page:loading:start", () => {
    const { url: siteUrl, name: siteName } = useSiteConfig();
    const route = useRoute();
    const likedData = route.meta.linedData;
    const website = {
      "@context": "https://schema.org",
      "@type": "WebSite",
      ...siteUrl && { url: siteUrl },
      ...siteName && { name: siteName }
    };
    const jsonLd = [
      website,
      ...likedData ? likedData.value : []
    ];
    useHead({
      script: [
        {
          type: "application/ld+json",
          innerHTML: JSON.stringify(jsonLd)
        }
      ]
    });
  });
});
